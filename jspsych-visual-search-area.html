<!DOCTYPE html>
<html>

<head>

  <script src="js/snap.svg-min.js"></script>
  <script src="js/jspsych.js"></script>
  <script src="js/jspsych-html-keyboard-response.js"></script>
  <script src="jspsych-visual-search-area.js"></script>
  <link rel="stylesheet" href="css/jspsych.css"></link>
</head>
<body></body>
<script>

    var blackN = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_a9vm7Xt0RAGbIZT';
    var blackNreverse = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_etUuwWE6KBXvfVj';
    var blueN = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_1G30qJte2pOSlY9';
    var blueNreverse = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_bearwNFEK8sTp3f';
    var greenN = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_6Sj3NvmUnfWl5UV';
    var greenNreverse = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_0UGxmdLNx3isonz';
    var purpleN = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_6s1Ozqn41jpD6i9';
    var purpleNreverse = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_9o7kT7GXKNbN5DD';
    var redN = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_0jKr5cMNf0AfqWV';
    var redNreverse = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_8AqAmzaq09s2iIR';
    var orangeN = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_8eTROOeRzBFXSqV';
    var orangeNreverse = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_3HOt9HxeE2xMCUZ';
    var tealN ='https://login.qualtrics.com/ControlPanel/File.php?F=F_dbNJvqrDTRqJTZX';
    var tealNreverse = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_2fM66YTp9kM9iPr';
    var yellowN = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_8qxrADNVUbkCWaN';
    var yellowNreverse = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_etdSHcRslE4WoaV';
    var fixation = 'https://login.qualtrics.com/ControlPanel/File.php?F=F_8hMer7qhnryQp3T';
    var blackL = 'https://ncsu.ca1.qualtrics.com/ControlPanel/File.php?F=F_3mxiCSOgJ4Gn6cd';
    var blackT = 'https://ncsu.ca1.qualtrics.com/ControlPanel/File.php?F=F_9YnKbQoEpVVUulT';

    // for testing
    // var blackN = 'img/n.png';
    // var blackNreverse = 'img/n-reverse.png';
    // var blueN = 'img/n-blue.png';
    // var blueNreverse = 'img/n-reverse-blue.png';
    // var greenN = 'img/n-green.png';
    // var greenNreverse = 'img/n-reverse-green.png';
    // var purpleN = 'img/n-purple.png';
    // var purpleNreverse = 'img/n-reverse-purple.png';
    // var redN = 'img/n-red.png';
    // var redNreverse = 'img/n-reverse-red.png';
    // var orangeN = 'img/n-orange.png';
    // var orangeNreverse = 'img/n-reverse-orange.png';
    // var tealN ='img/n-teal.png';
    // var tealNreverse = 'img/n-reverse-teal.png';
    // var yellowN = 'img/n-yellow.png';
    // var yellowNreverse = 'img/n-reverse-yellow.png';
    // var fixation = 'img/fixation.gif';
    // var blackL = 'img/the_L.png'
    // var blackT = 'img/the_T.png'

  // calculate key orientation
  var bool = [true, false];
  var key = Math.floor(Math.random()*bool.length);
  var absent_key = '';
  var present_key = '';

  if(bool[key]){
    absent_key = 'f';
    present_key = 'j';
  }else{
    absent_key = 'j';
    present_key = 'f';
  }


 var intro0 = {
    type: 'html-keyboard-response',
    stimulus: '<p><b>Please click the screen and press any key to begin.</b></p>'
  }

  var intro1 = {
    type: 'html-keyboard-response',
    stimulus: '<p>On the following screens, you will see a series of  <b>T&apos;s</b>.</p><br><br><b>Press any key to continue.</b>'
  }

  var intro2 = {
    type: 'html-keyboard-response',
    stimulus: '<p>There might be an <b>L</b> among the <b>T&apos;s</b>.</p><br><br><b>Press any key to continue.</b>'
  }
  
  var intro3 = {
    type: 'html-keyboard-response',
    stimulus: '<p>If you see a <b>L</b>, press the <b>'+present_key+'</b> key on your keyboard.</p><br><p>If you do not see a <b>L</b> on the screen, press <b>'+absent_key+'</b> on your keyboard.</p><br><p>Try and do these as quickly as possible while still maintaining accuracy.</p><br><b>Press any key to begin experiment.</b>'
  }


    var help = {
    type: 'html-keyboard-response',
    stimulus: '<p><H3>REMEMBER</H3><br>If you see a <b>L</b>, press the <b>'+present_key+'</b> key on your keyboard.</p><br><p>If you do not see a <b>L</b> on the screen, press <b>'+absent_key+'</b> on your keyboard.</p><br><b>Press any key to continue.</b>'
  }

// reduce for rendering
var num_trials = 5;
//  var num_trials = 33;
 var distractors = [blackT];
 var targets = [blackL];
 var present = [true, false];
 var trials = [[],[],[]];
 var size = 40;
 var min = 10;
 var max = 24;


 // create trials
 for (var j = 0; j < 3 ; j++){
   for (var i = 0; i < num_trials ; i++){

    // random element from list distractors
    // this will be the main color (same as target)
    var index = Math.floor(Math.random()*distractors.length);
    var distractor = distractors[index];

    // same element from list targets
    // this will be the target
    var target = targets[index];

    // set size between acceptible range
    var set = Math.random() * (max - min) + min;


    // randomize present
    var present_index = Math.floor(Math.random()*present.length);

    var trial = {
      target_present: present[present_index],
      target: target,
      target_absent_key: absent_key,
      target_present_key: present_key,
      foil: distractor,
      set_size: set,
      target_size: [size,size]
    }

    trials[j].push(trial);

   }
  }



  var trials1 = {
    type: 'visual-search-area',
    fixation_image: fixation,
    timeline: trials[0]
  };

  var trials2 = {
    type: 'visual-search-area',
    fixation_image: fixation,
    timeline: trials[1]
  };

  var trials3 = {
    type: 'visual-search-area',
    fixation_image: fixation,
    timeline: trials[2]
  };

  jsPsych.init({
    timeline: [intro0, intro1, intro2, intro3, trials1, help ,trials2, help ,trials3],
    on_finish: function() {
      jsPsych.data.displayData();
    }
  });
</script>

</html>
